<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Simple Todo</title>
	<style type="text/css">
		
	</style>
</head>
<body>
	<div id="todoapp">
		<header>
			<h1>Todos</h1>
			<input id="new-todo" type="text" placeholder="what needs to be done">
		</header>
	</div>
	
	<script src="http://7xl0rs.com1.z0.glb.clouddn.com/backbone/jquery.min.js"></script>
	<script src="http://7xl0rs.com1.z0.glb.clouddn.com/backbone/underscore-min.js"></script>
	<script src="http://7xl0rs.com1.z0.glb.clouddn.com/backbone/backbone-min.js"></script>
	<script src="http://7xl0rs.com1.z0.glb.clouddn.com/backbone/backbone.localStorage-min.js"></script>

	<script>
	(function($){
		// model
		var Todo = Backbone.Model.extend({
			defaults: {
				title: 'empty todo ...',
				order: Todos.nextOrder(),
				done: false
			},
			toggle: function(){
				this.save({ done: !this.get('done')})
			}

		})

		var TodoList = Backbone.Collection.extend({
			model: Todo,
			localStorage: new Backbone.LocalStorage("todos-backbone"),
			done: function(){
				return this.where({ done: true })
			},
			remaining: function(){
				return this.where({ done: false })
			},
			nextOrder: function(){
				if(!this.length) return 1
				return this.last().get('order') + 1
			},
			comparator: 'order'
		})

		

	})(jQuery)		
	</script>
</body>
</html>